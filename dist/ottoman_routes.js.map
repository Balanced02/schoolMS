{"version":3,"sources":["../server/ottoman_routes.js"],"names":["app","router","api","upload","dest","use","initialize","session","LocalStrategy","Strategy","authenticate","serializeUser","deserializeUser","static","join","__dirname","get","post"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAGA;;;;AAEA;;AACA;;;;AA6CA,IAAMA,MAAM,wBAAZ;AACA,IAAMC,SAAS,sBAAf;AACA,IAAMC,MAAM,sBAAZ;;AAEA,IAAIC,SAAS,sBAAO,EAAEC,MAAM,gBAAR,EAAP,CAAb;;AAGA;AACAH,OAAOI,GAAP,CAAW,mBAASC,UAAT,EAAX;AACAL,OAAOI,GAAP,CAAW,mBAASE,OAAT,EAAX;;AAEA,IAAMC,gBAAgB,wBAAcC,QAApC;AACA,mBAASJ,GAAT,CAAa,IAAIG,aAAJ,CAAkB,gBAAME,YAAN,EAAlB,CAAb;AACA,mBAASC,aAAT,CAAuB,gBAAMA,aAAN,EAAvB;AACA,mBAASC,eAAT,CAAyB,gBAAMA,eAAN,EAAzB;;AAEAX,OAAOI,GAAP,CAAW,MAAX,EAAmBH,GAAnB;;AAEAD,OAAOI,GAAP,CAAW,kBAAQQ,MAAR,CAAe,eAAKC,IAAL,CAAUC,SAAV,EAAqB,iBAArB,CAAf,CAAX;;AAIA;AACAb,IAAIc,GAAJ,CAAQ,KAAR;AACAd,IAAIe,IAAJ,CAAS,aAAT,EAAwB,mBAASP,YAAT,CAAsB,OAAtB,CAAxB;AACAR,IAAIe,IAAJ,CAAS,oBAAT;AACAf,IAAIe,IAAJ,CAAS,gBAAT;AACAf,IAAIc,GAAJ,CAAQ,cAAR","file":"ottoman_routes.js","sourcesContent":["import express, { Router } from 'express';\nimport path from 'path';\nimport cookieParser from 'cookie-parser';\nimport session from 'express-session';\nimport passport from 'passport';\nimport passportLocal from 'passport-local';\nimport mongoose from 'mongoose';\nimport Ottoman from 'ottoman';\nimport connectMongo from 'connect-mongo';\nimport multer from 'multer';\n\n\nimport Users from './models/Users';\n\nimport { Register, Login, Logout, RedirectNoAuth, AuthMe, CreateSchool } from './controllers/auth';\nimport {\n  SummaryData,\n  CreateNotice,\n  CreateNote,\n  GetNotes,\n  GetOtNotes,\n  CreateCourse,\n  AllCourse,\n  UpdateCourse,\n  VisitorData,\n  GetVisitors,\n  GetTeachers,\n  AllClass,\n  AddClass,\n  UpdateClass,\n  LeaveApplication,\n  GetLeave,\n  LeaveUpdate,\n  NewDepartment,\n  FetchDepartment,\n  CategoryUpdate,\n  GetLeaveCategory,\n  GetUserCategory,\n  AddUserCategory,\n  AddPayHead,\n  GetPayHead,\n  EditSchool,\n  GetSchools,\n  UploadFile,\n  LibraryCategoryUpdate,\n  getImg,\n  GetLibraryCategory,\n  UpdateSchool,\n  CreateStudentGatePass,\n  GetStudentGatePass,\n  DeleteStudentGatePass,\n  GetUserDetails,\n  UploadUserDetails,\n  CreateStudentCategory,\n  GetStudentCategory,\n  GetAcademicDetails,\n  AcademicDetailsUpdate,\n  UpdateUserModule,\n} from './controllers/api';\n\nconst app = express();\nconst router = Router();\nconst api = Router();\n\nvar upload = multer({ dest: './public/logos' });\n\n\n// PassportJS Setup\nrouter.use(passport.initialize());\nrouter.use(passport.session());\n\nconst LocalStrategy = passportLocal.Strategy;\npassport.use(new LocalStrategy(Users.authenticate()));\npassport.serializeUser(Users.serializeUser());\npassport.deserializeUser(Users.deserializeUser());\n\nrouter.use('/api', api);\n\nrouter.use(express.static(path.join(__dirname, '../client/build')));\n\n\n\n// Auth\napi.get('/me', AuthMe);\napi.post('/auth/login', passport.authenticate('local'), Login);\napi.post('/auth/createSchool', CreateSchool);\napi.post('/auth/register', Register);\napi.get('/auth/logout', Logout);"]}